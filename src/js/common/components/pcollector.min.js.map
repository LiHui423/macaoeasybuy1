{"version":3,"sources":["common/pcollector/pcollector.js"],"names":["pcollector","initialized","data","albumList","page","targetURL","parameters","undefined","order","userId","encryptData","panelContainer","uploadData","albumListContainer","settings","pictureListContainer","createButton","newAlbumNameInput","collectButton","$settings","methods","insertHTML","$methods","this","$","after","load","bindEvent","closeButton","on","displayPanel","val","createNewAlbum","param","css","init","insertAlbumList","open","insertPictureList","changeSize","width","addClass","attr","img","changeSizeAlbum","each","height","collect","$data","collects","ids","children","pl","index","find","push","desc","id","pic","easyBuy","easyUser","name","albumId","albumName","userName","length","requestData","ajax","url","JSON","stringify","dataType","res","log","newAlbumName","input","removeAttr","prepend","newAlbum","eq","albumSelected","album","hasClass","toggleClass","html","container","textAreaChange","htmlString","generatePictureListHTML","_typeof","item","off","Object","keys","reduce","pictureID","p","generateAlbumItem","idArr","getAlbumList","callback","method","itemString","getRequestURL","beforeSend","lazyload","success","append","albumTitle","size","state","global","dep","easyScrollRequest","paramObj","pre","paramName","dataPass","initialize","_this","$el","setSettings"],"mappings":"mOAAMA,YACFC,aAAa,EACbC,MACIC,WAHFH,UAAa,kGACfC,YACMG,KAAA,EACFD,KAAW,EACPE,MAAW,SACXC,UAAY,OACRF,YADQG,GAGRC,aAAO,GAEPC,eAEJC,UATOC,eADT,wBAYFC,qBAAY,sCAdDC,mBAAA,oCAgBfC,YAAU,mBACNH,aAAAA,uBACAI,kBAAAA,sBACAF,cAAAA,wBAEAG,SACAC,SAAAA,EACAC,WAAAA,EAvBWC,eAAAZ,EAyBfa,cAASb,EASLc,WAbAL,WAUA,IAAAM,EAAAC,KAAAD,SAKIE,EAAE,sCAAsCC,MAAM,6EAC9CD,EAAE,eAAeE,KAAK,6DAH1BL,EATKM,aAYDH,UAhBJR,WAiBIM,IAAAA,EAAAC,KAAAJ,UAbCG,EAAAC,KAAAD,SAgBLK,EAAAA,EAhBKC,aAAAC,GAgBO,QAAA,WACFV,EAAAA,cAAiBA,KAEvBK,EAAEL,EAAUS,cAAaC,GAAG,QAAS,WACjCP,EAASQ,eAAaN,EAAAL,EAAtBF,mBAAAc,SAEJP,EAAEL,EAAUH,eAAca,GAAG,QAAS,WAClCP,EAASU,aAOjBF,aAlCAd,SAkCAiB,GAKI,IAAMd,EAAYI,KAAKJ,UACvBc,EAAQT,EAAEL,EAAUR,gBAAgBuB,IAAI,UAAW,SAAWV,EAAEL,EAAUR,gBAAgBuB,IAAI,UAAW,SAM7GC,KA9CAnB,WA+CIO,KAAKF,aAJTE,KAAAa,mBAYAC,KAvDArB,SAuDKiB,GACD,IAAMX,EAAWC,KAAKH,QAL1BE,EAAAgB,kBAAAL,GAOIX,EAASiB,aACTjB,EAASQ,cAAa,IAHtBS,WAxDJvB,WAyDIM,EAAAA,qBAASgB,KAAkBL,WAC3BX,KAASiB,OAAAA,KAATC,OAAAhB,EAAAD,MAAAkB,SAAA,KACAnB,IAASQ,EAAAA,EAAAA,MAAaY,KAAO,OAvD5BlB,EAAAD,MAAAW,IAAA,mBAAA,OAAAS,EAAA,KAAAD,KAAA,MAAA,4BA6DGE,gBAjER5B,WAkEQQ,EAAAA,mBAAYqB,KAAA,WAHjBtB,KAAAuB,OAAAvB,KAAAiB,OAAAhB,EAAAD,MAAAkB,SAAA,KA3DE,IAAAE,EAAAnB,EAAAD,MAAAmB,KAAA,OAkELE,EAAAA,MAlEKV,IAAA,mBAkELU,OAAkBD,EAAlBC,KAAkBF,KAAA,MAAA,4BAWlBK,QAjFA/B,WAkFI,IAAMG,EAAYI,KAAKJ,UAJ3BP,EAAAW,KAAAyB,MAAApC,WAMUU,EAAWC,KAAKD,SACtBV,EAAWqC,YAJfF,EA7EKG,IAAA,GA8ED,IAAM/B,EAAAA,EAAAA,EAAiBA,sBAAvBgC,WACAC,EAAAP,KAAIjC,SAAayC,GACX/B,IAAAA,EAAN,KAAiBE,EAAAD,MAAKD,KAAtB,YAAAS,MAAAP,EAAAD,MAAA+B,KAAA,YAAAZ,KAAA,eAAAlB,EAAAD,MAAA+B,KAAA,YAAAvB,MACAnB,EAAWqC,SAAXM,MACA3C,KAAA4C,EACMJ,IAAOjC,GACLsC,GAAAjC,EAAAD,MAAU8B,KAAO,QAErBzC,IAAWqC,EAAAA,OAASM,EAAK3C,EAAAsC,KAAA1B,EAAAD,MAAArB,KAAA,MAAA,IAAAU,EAAAsC,KAAA1B,EAAAD,MAAArB,KAAA,QAErBwD,EAAAA,OAFqBC,QAAAC,SAAAH,GAGrBA,EAAAA,SAAYvD,QAAR0D,SAAAC,QAHRjD,EAAAkD,SAAAlD,EAAAmD,WAAAnD,EAAAH,QAAAG,EAAAoD,UAAA,IAAApD,EAAAqC,SAAAgB,QAFJ3C,EAAA4C,YAAAtD,IAUAA,EAAWoD,SAAWL,MAAQC,UAclCM,YAhHAlD,SAgHYiB,GACSV,KAAKD,SAL1BE,EAAA2C,MAOQC,IAAK,yGAA2GC,KAAKC,UAAUrC,GAAS,qBACxIsC,SAAU,OACVnD,QAAS,MALjB8C,QA5GK,SAAAM,GA6GKlD,QAAWmD,IAAKnD,IAElB8C,MAAK,SAAAI,GACLD,QAAUE,IAFPD,OAWVxC,eA7HDhB,SAIK0D,GAgID,IAAMvD,EAAYI,KAAKJ,UACnBG,EAAWC,KAAKD,SANxBqD,EAAAnD,EAAAL,EAAAF,mBAQI,GAAMyD,EAAc,CAChBC,EAAMC,WAAW,eAAe7C,IAAI,IACpCP,EAAEL,EAAUN,oBAAoBgE,QAAhC,gFAAwHH,EAAxH,gBANR1C,IA/HK8C,EAAAtD,EAAAL,EAAAN,oBA+HwBsC,WAAA4B,GAAA,GACnB5D,EAAAA,KAAY,YAAlBuD,GACIpD,EAAAA,KAAW,WADf,GAEMqD,EAAQnD,GAAEL,QAAUF,WACpByD,EAAAA,cAAclD,EAAAD,SAEhBC,EAAEL,cAAUN,QAEZiE,EAAAA,KAAS5E,cAAT,cAQH8E,cAnJLhE,SAmJKiE,GA/IA,IAAArE,EAAAW,KAAAyB,MAAApC,WAwJGqE,EAAMC,SAAS,eACftE,EAAWkD,aAAUvD,EAP7BK,EAAAmD,UAAA,KAUQnD,EAAWkD,QAAUmB,EAAM/E,KAAK,WAChCU,EAAWmD,UAAYkB,EAAM/E,KAAK,cANtC+E,EAAMrE,YAAa,cACnBqE,EAAIA,SAAMC,eAASC,YAAe,cAC9BvE,EAAAA,sBAAAwE,KAAAxE,YAAAA,EAAAmD,YAOJkB,kBApKJjE,SAoKIiB,GACAT,IAAEL,EAAAI,KAAFJ,UAjKCG,EAAAC,KAAAD,SA2KK+D,EAAY7D,EAAEL,EAAUJ,sBAC9BO,EAASgE,gBAAe,GAR5B,IAAAC,EAAAjE,EAAAkE,wBAAAvD,GAUIoD,EAAUD,KAAKG,GACfF,EAAUlC,WAAWN,KAAK,WACtBrB,EAAED,MAAMrB,KAAK,KAAMsB,EAAED,MAAMmB,KAAK,OARxCJ,EAxKKgD,eAAA9D,EAAAD,MAAA+B,KAAA,gBAgLG9B,eApLRR,SAoLQiB,GACAX,IAAAA,EAASgE,KAAAA,UACZ,GAHD,iBAAA,IAAArD,EAAA,YAAAwD,QAAAxD,IA/KCA,EAAAJ,GAAA,QAAA,YA6LQL,EAAED,MAAMQ,OAASP,EAAED,MAAMQ,IAAIE,EAAMS,KAAK,kBARrDT,EAAAJ,GAAA,OAAA,WAWgBL,EAAED,MAAMQ,QAAUE,EAAMS,KAAK,eAC7BlB,EAAED,MAAMQ,IAAI,IACa,KAAlBP,EAAED,MAAMQ,OAlM1BP,EAAAD,MAAAmB,KAAA,cAyLUT,UAGPA,CACI,IAACT,EAAQO,EAAAA,EAAWhB,sBAAqBuC,KAAA,YAD7C,IAECoC,EAFDzB,QAAAyB,EAAA7C,KAAA,WAGAZ,EAAMJ,MAAG8D,IAAT,SACInE,EAAAD,MAAMoE,IAAM5D,YASZP,wBA7MZR,SA6MwBiB,GAEf,OADG2D,OAAYC,KAAZ5D,GAFJ6D,OAAA,SAAAP,EAAAQ,GAIH,IAAAC,OAAAzF,IAAA0B,EAAA8D,GAAAvC,KAAAvB,EAAA8D,GAAAvC,KAAA,GA5MA,OAAA+B,EAAAA,gCAAAQ,EAAA,8GAAA9D,EAAA8D,GAAArC,IAAA,+FAAAsC,EAAA,4BAwNE,KAJHC,kBAxNJjF,SAwNkB4E,GACd,OAAOM,EAAMJ,KAAAA,OAAO,SAAUP,EAAYQ,GACtC,OAAMC,EAAAA,WAAIN,EAAA,QAAJM,oCAANN,EAAA,SAAMM,wFAANN,EAAA,SAAMM,iBAANN,EAAA,WAAMM,gBACN,KAkBRG,aA7OAnF,SA6OaoF,GACT,IAAM9E,EAAWC,KAAKD,SAX1B2E,EAAAA,KA/NKjD,MAgODxB,EAAA2C,MACIkC,OAAOC,MACR/B,SAFH,OAhOCH,IAAA9C,EAAAiF,cAAAvD,EAAA7C,WAgPGqG,WAhBGvE,WAiBCX,EAASmF,UAAYnF,EAASmF,UAAS,IAE3CC,QAnBGzE,SAmBKuC,GACJ,IAAMtE,GACFE,KAAM4C,EAAM7C,UAAUG,WAAWF,KArP5CF,KAAAsE,EAAA,QA2OGxB,GAAaA,EADjB9C,OASIwG,gBAvPR1F,WAwPY,IAAAM,EAAMpB,KAAOoB,SACTlB,EAAAA,KAAM4C,UACN9C,EAAAA,KAAAA,MAFSmF,EAAb7D,EAAAL,EAAAN,oBAIAuF,EAAAA,aAAYA,SAASlG,GACxB,IAAA+B,EAAA7B,KAbLiF,EAAAD,KAAA9D,EAAA2E,kBAAAhE,IA5OCoD,EAAAsB,OAAArF,EAAA2E,kBAAAhE,IAyQGT,EAAEqB,KAAKZ,EAAM/B,KAAM,WACf,IAAM+E,EAAQI,EAAUlC,SAAV,IAAuB5B,KAAKuC,SAbtDmB,EAAA/E,KAAA,UAAAqB,KAAAuC,SAeYmB,EAAM/E,KAAK,YAAaqB,KAAKqF,YAC7B3B,EAAMpD,GAAG,QAAS,WA7QzBP,EAAA0D,cAAAC,OAmQGjC,EAAQJ,kBACNyC,EAAAA,KAAclE,OAAUN,EAAAA,UAAAA,WAA9BgG,KACAvF,EAAS6E,SAAa,MAIhBtD,EAAW3C,UAAM,GACf8C,EAAMiC,UAAQI,WAAUlC,WAIpB7B,SAlRhBN,SAkRgBM,GACH,IAAAA,EAFDC,KAAAD,SAGHwF,EACDxF,QAAAA,OAASsB,IAAAA,kBAAT,KAAA,KAAApB,EAAA,mBAAAA,EAAA,mCAAA,WACIS,EAAM/B,oBAETyD,QAAMoD,OAAAC,IAAAC,kBAAA,MAAA,KAAAzF,EAAA,qBAGN+E,cA3RTvF,SA2RSkG,GAvRJ,QAqQD3G,IAAA2G,EAAA7G,WAAA,KAAA6G,EAAA7G,UArQC,CAAA,IAAAA,EAAA6G,EA0RW7G,UACNiB,EAAgBA,EAAtBhB,WAEI4G,EAAmBD,YASnB,OADU5G,EAAA,IALS4G,OAAAA,KAAAA,GAhStBnB,OAAA,SAAAqB,EAAAC,GAAA,OAAAD,EAAAC,EAmSSF,IAnST5G,EAmSmB8G,GAAA,KACdC,IACQ,oBACV,OAEI3G,IAQP4G,WAzUM,WA8TP,IAAAC,EAAAhG,KAyBJA,KAAKH,QAAQoG,IAbLD,EAKZhG,KAAAH,QAAA4B,MAJSuE,EAAArH,KAcLqB,KAAKH,QAAQD,UAbZoG,EAAAzG,SAcDS,KAAKH,QAAQE,SA1VFiG,EAAAnG,QAkVfkG,KAAAA,KAlVenH,UAAAG,WAkVFG,OAAAkD,QAAAC,SAAAH,GAAAlC,KAAAH,QAAAe,QAEKE,KApVH,SAmVXJ,IAAAV,KAEIkG,aAAclG,KAAA+F,eAAA/F,KAAAtB,aAAAsB,KAAAtB,aAAAsB,KAAAc,KAAMd,KAAKT,QAAXuB,KAAAd,KAFlBc,KAAAJ","file":"pcollector.min.js","sourcesContent":["const pcollector = {\n    initialized: false,\n    data: {\n        albumList: {\n            targetURL: 'http://social1.macaoeasybuy.com/thealbumSocialConntroller/queryUserAlbums.easy',\n            parameters: {\n                page: 0,\n                size: 8,\n                order: 'uptime',\n                descOrasc: 'desc',\n                userId: undefined\n            },\n            encryptData: true\n        },\n        uploadData: {},\n    },\n    settings: {\n        panelContainer: '.pcollector-container', //面板容器\n        pictureListContainer: '.pcollector-container .picture-list', //圖片列表容器\n        albumListContainer: '.pcollector-container .album-list', //專輯列表容器\n        closeButton: '.panel-close-btn', //關閉按鈕\n        createButton: '.create-album button', //創建新專輯按鈕\n        newAlbumNameInput: '.create-album input', //新專輯名稱輸入框\n        collectButton: '.panel-footer button', //採集按鈕\n    },\n    methods: {\n        $el: undefined,\n        $data: undefined,\n        $settings: undefined,\n        $methods: undefined,\n\n        /**\n         * @desc 插入面板HTML和CSS\n         */\n        insertHTML() {\n            const $methods = this.$methods;\n            $('head > link[rel=\"stylesheet\"]:last').after('<link rel=\"stylesheet\" href=\"/css/common/components/pcollector.min.css\">');\n            $('#pcollector').load('/page/common/components/pcollector.html .pcollector-panel');\n            $methods.bindEvent();\n        },\n\n        bindEvent() {\n            const $settings = this.$settings;\n            const $methods = this.$methods;\n            $($settings.closeButton).on('click', function () {\n                $methods.displayPanel(false);\n            });\n            $($settings.createButton).on('click', function () {\n                $methods.createNewAlbum($($settings.newAlbumNameInput).val());\n            });\n            $($settings.collectButton).on('click', function () {\n                $methods.collect();\n            })\n        },\n\n        /**\n         * @desc 面板显示状态\n         * @param {boolean} param 是否顯示面板\n         */\n        displayPanel(param) {\n            const $settings = this.$settings;\n            param ? $($settings.panelContainer).css('display', 'block') : $($settings.panelContainer).css('display', 'none');\n        },\n\n        /**\n         * @desc 內部初始化\n         */\n        init() {\n            this.insertHTML(); // 插入面板\n            this.insertAlbumList(); // 插入用戶專輯列表\n        },\n\n        /**\n         * @desc 打開面板\n         * @param {array} param 圖片數組\n         */\n        open(param) {\n            const $methods = this.methods;\n            $methods.insertPictureList(param); // 插入圖片HTML\n            $methods.changeSize();\n            $methods.displayPanel(true); //顯示面板\n        },\n\n        changeSize() {\n           $('.picture-list img').each(function() {\n                this.height > this.width && $(this).addClass('h');\n                const img = $(this).attr('src');\n                $(this).css('background-image', `url(${img})`).attr('src', '/img/common/pixel.png');\n           })\n        },\n\n        changeSizeAlbum() {\n            $('.album-list img').each(function() {\n                this.height > this.width && $(this).addClass('h');\n                const img = $(this).attr('src');\n                $(this).css('background-image', `url(${img})`).attr('src', '/img/common/pixel.png');\n           })\n        },\n\n        /**\n         * @desc 採集圖片\n         */\n        collect() {\n            const $settings = this.$settings;\n            let uploadData = this.$data.uploadData;\n            const $methods = this.$methods;\n            uploadData.collects = [];\n            uploadData.ids = '';\n            const pl = $($settings.pictureListContainer).children();\n            pl.each(function (index) {\n                const desc = $(this).find('textarea').val() === '' ? $(this).find('textarea').attr('placeholder') : $(this).find('textarea').val();\n                uploadData.collects.push({\n                    desc: desc,\n                    pic: '',\n                    id: $(this).data('id'),\n                });\n                (index !== pl.length - 1) ? (uploadData.ids += $(this).data('id') + ',') : (uploadData.ids += $(this).data('id'));\n            });\n            uploadData.userId = easyBuy.easyUser.id;\n            uploadData.userName = easyBuy.easyUser.name;\n            const pass = !!uploadData.albumId && !!uploadData.albumName && !!uploadData.userId && !!uploadData.userName && uploadData.collects.length !== 0;\n            if (pass) {\n                $methods.requestData(uploadData);\n            } else {\n                !uploadData.albumId && alert('未選擇專輯');\n                // !uploadData.userId && window.open(''); 跳轉到登錄頁\n            }\n        },\n\n        /**\n         * @desc 提交數據\n         * @param {object} param 數據對象\n         */\n        requestData(param) {\n            const $methods = this.$methods;\n            $.ajax({\n                url: 'http://social1.macaoeasybuy.com/thealbumSocialConntroller/collectAlbum.easy?collects=' + JSON.stringify(param) + '&easybuyCallback=?',\n                dataType: 'JSON',\n                methods: 'GET',\n                success: function (res) {\n                    console.log(res);\n                },\n                error: function (res) {\n                    console.log(res);\n                },\n            });\n        },\n\n        /**\n         * @desc 創建新專輯\n         * @param {string} newAlbumName 新專輯的名稱\n         */\n        createNewAlbum(newAlbumName) {\n            const $settings = this.$settings,\n                $methods = this.$methods;\n            const input = $($settings.newAlbumNameInput);\n            if (!!newAlbumName) {\n                input.removeAttr('placeholder').val('');\n                $($settings.albumListContainer).prepend(`<li class=\"album-item\" data-total=\"0\"><div class=\"img-container\"></div><span>${newAlbumName}</span></li>`);\n                const newAlbum = $($settings.albumListContainer).children().eq(0);\n                newAlbum.data('albumName', newAlbumName);\n                newAlbum.data('albumId', -1);\n                newAlbum.on('click', function () {\n                    $methods.albumSelected($(this));\n                });\n                $methods.albumSelected(newAlbum);\n            } else {\n                input.attr('placeholder', '請輸入新專輯的名稱');\n            }\n        },\n\n        /**\n         * @desc 選中專輯\n         * @param {object} album 專輯對象\n         */\n        albumSelected(album) {\n            const uploadData = this.$data.uploadData;\n            if (album.hasClass('yez-active')) {\n                uploadData.albumId = undefined;\n                uploadData.albumName = '';\n            } else {\n                uploadData.albumId = album.data('albumId');\n                uploadData.albumName = album.data('albumName');\n            }\n            album.toggleClass('yez-active');\n            album.siblings('.yez-active').toggleClass('yez-active');\n            $('.active-album-name').html(`當前選中的專輯為：${uploadData.albumName}`);\n        },\n\n        /**\n         * @desc 插入圖片列表\n         * @param {array} param 圖片數組\n         */\n        insertPictureList(param) {\n            const $settings = this.$settings,\n                $methods = this.$methods;\n            const container = $($settings.pictureListContainer);\n            $methods.textAreaChange(false);\n            const htmlString = $methods.generatePictureListHTML(param);\n            container.html(htmlString);\n            container.children().each(function () {\n                $(this).data('id', $(this).attr('id'));\n                $methods.textAreaChange($(this).find('textarea'));\n            });\n        },\n\n        /**\n         * @desc 圖片描述修改\n         * @param {object|boolean} param JQ對象或者布爾值\n         */\n        textAreaChange(param) {\n            const $settings = this.$settings;\n            if (typeof param === 'object') {\n                param.on('focus', function () {\n                    !$(this).val() && $(this).val(param.attr('placeholder'));\n                });\n                param.on('blur', function () {\n                    if ($(this).val() === param.attr('placeholder')) {\n                        $(this).val('');\n                    } else if ($(this).val() === '') {\n                        $(this).attr('placeholder', '');\n                    }\n                })\n            } else {\n                const item = $($settings.pictureListContainer).find('textarea');\n                item.length !== 0 && item.each(function () {\n                    $(this).off('focus');\n                    $(this).off('blur');\n                })\n            }\n        },\n\n        /**\n         * @desc 生成圖片列表的html代碼\n         * @param {array} param 圖片數組\n         */\n        generatePictureListHTML(param) {\n            const idArr = Object.keys(param);\n            return idArr.reduce(function (htmlString, pictureID) {\n                const p = param[pictureID].desc !== undefined ? param[pictureID].desc : ''\n                return htmlString + `<li class=\"picture-item\" id=\"${pictureID}\"><div class=\"item-img\"><div class=\"img-container\"><img class=\"e\" src=\"//mbuy.oss-cn-hongkong.aliyuncs.com/${param[pictureID].pic}\"></div></div><div class=\"item-content\"><textarea class=\"scrollIe scrollOther\" placeholder=\"${p}\"></textarea></div></li>`\n            }, '');\n        },\n\n        /**\n         * @desc 生成專輯列表的html代碼\n         * @param {object} param 請求回的專輯數據\n         */\n        generateAlbumItem(param) {\n            return param.data.reduce(function (itemString, item) {\n                return itemString + `<li id=\"${item['albumId']}\" class=\"album-item\" data-total=\"${item['picCount']}\"><div class=\"img-container\"><img class=\"e\" src=\"//mbuy.oss-cn-hongkong.aliyuncs.com/${item['coverPic']}\"></div><span>${item['albumTitle']}</span></li>`;\n            }, '');\n        },\n\n        /**\n         * @desc 獲取用戶已有專輯的數據\n         * @param {function} callback 獲取數據成功後的回調函數\n         */\n        getAlbumList(callback) {\n            const $methods = this.$methods,\n                $data = this.$data;\n            $.ajax({\n                method: 'GET',\n                dataType: 'JSON',\n                url: $methods.getRequestURL($data.albumList),\n                beforeSend() {\n                    $methods.lazyload && $methods.lazyload(false);\n                },\n                success(res) {\n                    const data = {\n                        page: $data.albumList.parameters.page,\n                        data: res['result']\n                    };\n                    callback && callback(data);\n                }\n            });\n        },\n\n        /**\n         * @desc 插入用戶專輯列表\n         */\n        insertAlbumList() {\n            const $methods = this.$methods,\n                $settings = this.$settings,\n                $data = this.$data;\n            const container = $($settings.albumListContainer);\n            $methods.getAlbumList(function (param) {\n                param.page === 0 ?\n                    (container.html($methods.generateAlbumItem(param))) :\n                    (container.append($methods.generateAlbumItem(param)));\n                $.each(param.data, function () {\n                    const album = container.children(`#${this.albumId}`);\n                    album.data('albumId', this.albumId);\n                    album.data('albumName', this.albumTitle);\n                    album.on('click', function () {\n                        $methods.albumSelected(album);\n                    })\n                });\n                $methods.changeSizeAlbum();\n                if (param.data.length < $data.albumList.parameters.size) {\n                    $methods.lazyload = null;\n                } else {\n                    $methods.lazyload(true);\n                    $data.albumList.parameters.page++;\n                }\n            })\n        },\n        lazyload(state) {\n            const $methods = this.$methods;\n            state ?\n                easyBuy.global.dep.easyScrollRequest('on', 'al', $('.list-container'), $('.list-container > ul.album-list'), function () {\n                    $methods.insertAlbumList();\n                }) :\n                easyBuy.global.dep.easyScrollRequest('off', 'al', $('.list-container'));\n\n        },\n        getRequestURL(paramObj) {\n            const dataPass = paramObj.targetURL !== undefined && paramObj.targetURL !== '';\n            if (dataPass) {\n                const targetURL = paramObj.targetURL,\n                    parameters = paramObj.parameters,\n                    encryptData = paramObj.encryptData;\n                let requestURL;\n                const paramNameArr = Object.keys(parameters),\n                    paramString = paramNameArr.reduce(function (pre, paramName) {\n                        return pre + paramName + '=' + parameters[paramName] + '&';\n                    }, '');\n                requestURL = targetURL + '?' + paramString + 'easybuyCallback=?';\n                return requestURL;\n            } else {\n                return false;\n            }\n        },\n    },\n\n    /**\n     * @desc 初始化\n     */\n    initialize() {\n        const setEl = () => this,\n            setData = () => this.data,\n            setSettings = () => this.settings,\n            setMethods = () => this.methods;\n        this.methods.$el = setEl();\n        this.methods.$data = setData();\n        this.methods.$settings = setSettings();\n        this.methods.$methods = setMethods();\n        this.data.albumList.parameters.userId = easyBuy.easyUser.id;\n        this.methods.init();\n    },\n\n    /**\n     * @desc 打開面板\n     * @param {array} param 圖片數組\n     */\n    open(param) {\n        !this.initialized && this.initialize() && (this.initialized = !this.initialized);\n        this.open = this.methods.open;\n        this.open(param);\n    }\n};\n"]}
